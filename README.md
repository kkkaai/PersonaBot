# Project Name: PersonaBot

## Description

**PersonaBot** is an advanced humanoid robot capable of walking, with dual arms and dexterous hands. This project showcases its intelligent and natural interaction capabilities with humans using the latest multimodal large models. The robot not only performs end-to-end speech input to speech output with emotional responses, but also accompanies its answers with realistic, human-like gestures generated by motion generation models. Additionally, the robot displays a dynamic human-like face on its head's flexible screen.

**Key Features:**
1. **Mobility and Dexterity:** 
    - PersonaBot can walk, has dual arms, and dexterous hands, enabling it to perform complex tasks and interactions.
2. **Intelligent Interaction:** 
    - Utilizes state-of-the-art multimodal models to achieve end-to-end speech input to speech output.
    - Provides emotional responses and realistic human-like gestures during interactions.
3. **Human-like Presence:**
    - Displays a dynamic and natural human-like face on a flexible screen mounted on the robot's head.
    - Capable of holding a microphone and speaking into it.

**Project**
The core of the project is the "Demo Main Control Logic," which coordinates the robot's actions by interfacing with lower-level ROS1 and ROS2 nodes for navigation, arm control, and dexterous hand movements. Additionally, the software generates an HTML-based GUI for remote operators to control and monitor the robot in real-time.


## Getting Started

**Prerequisites**
Python 3.10
Required Python packages (listed in requirements.txt)

Install the required packages:
```
pip install -r requirements.txt
```

**ROS setup**

1. Install ROS2

2. Set the ROS_DOMAIN_ID environment variable:
The low level ROS 2 node for controlling the Robot Arms are on a remote computer. The computer running this Python project need to be in the same local network.
Ensure that the computer running this Python project and and the computer running low level robotic control ROS2 node have the same ROS_DOMAIN_ID value set.
```bash
export ROS_DOMAIN_ID=<domain_id>
```

2. Build and source ROS package for Arm motor message definitiion

Because Arm ROS2 node uses custom message definition, so you need to build a package before you can use it in Python.
See Wiki page [Manual arm motor control](https://github.com/existenz98/PersonaBot/wiki/Manual-arm-motor-control)

After building the package in 3rdParty/body_arms/ros/cmdsub_ws folder, you need to source it:
```bash
source 3rdParty/body_arms/ros/cmdsub_ws/install/setup.bash
```

For Navigation control, the ROS2 node uses standard geometry_msgs/msg/Twist message.  So you can use it directly without building custom ROS package.


**Running the Project**

1. source ROS2 environment
```
source <your ros2 path>/setup.bash
```
e.g.  source /opt/ros/humble/setup.bash

```bash
source 3rdParty/body_arms/ros/cmdsub_ws/install/setup.bash
```

2. Set the PYTHONPATH environment variable to include the src directory:
```bash
export PYTHONPATH=$PYTHONPATH:$(pwd)/src
```
3. Start:
```bash
python main.py
```
3. Open your web browser and go to http://localhost:5000 to access the remote control interface.

In Windows,
cmd          
```cmd
set PYTHONPATH=%PYTHONPATH%;%cd%\src
```
PowerShell   
```powershell
$env:PYTHONPATH="$env:PYTHONPATH;$(Get-Location)\src"
```
Then run
```
python main.py
```
